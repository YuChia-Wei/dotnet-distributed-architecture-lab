# 計畫

1. 程式盤點與 PRD 完成：紀錄現況（API、命令/查詢、Domain、Repository、Consumer 與 Wolverine 設定）。
2. 儲存與事件對齊：
   - 以 Dapper + PostgreSQL 取代記憶體 `ProductDomainRepository`；提供 `Products` 表 SQL。
   - 在 `Add/Update/Delete` 後派送 `Product*` 領域事件（`IDomainEventDispatcher`）。
3. 整合事件（可選）：視需求定義 `ProductCreated/Updated/Deleted` integration events 並發布到 `products`。
4. Consumer 行為決策：若要扣庫存，於 `OrderPlaced` handler 中查詢產品並 `DecreaseStock`，再持久化。
5. 設定統一：對齊連線字串命名（`ConnectionStrings:KafkaBroker/MessageBroker` 或 `BrokerConnectionString` 選其一），並更新文件。
6. 驗證：以 compose 啟動 Broker/DB，驗證 API CRUD、事件派送/發布與 Consumer 行為，確保建置/執行/測試通過。
